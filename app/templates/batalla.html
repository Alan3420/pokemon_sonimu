{% extends "base.html" %}
{% block title %}PokemonSonimu{% endblock %}
{% block style %}
<link rel="stylesheet" href="{{ url_for('static', filename='../static/css/batalla.css') }}">
{% endblock %}
{% block jugar %}
{% if batalla.hp_rival == 0 or batalla.hp_Jugador == 0 %}
<li><a href="/pokedexSeleccion">Jugar de nuevo</a></li>
{% endif %}
{% endblock %}
{% block content %}

<div class="contenedor-principal">
    <div id="interfaz">
        <!-- Batalla-Interfaz -->
        <div class="batalla">

            <!-- Enemigo -->
            <div id="bloqueIa">

                <!-- INICIO ESTADO -->
                <div>
                    <div class="bloqueEstado">
                        <div class="top-row">
                            <div class="name">{{ pokemonContrincante.name | capitalize }}</div>
                        </div>

                        <div class="bloque_hpBarra">
                            <div class="hpBarra" style="width: {{(batalla.hp_rival/hp_max_rival)*100}}%;"></div>
                        </div>
                        <div class="hpText">

                            {{batalla.hp_rival}} / {{hp_max_rival}}


                        </div>
                    </div>
                </div>
                <!-- FIN ESTADO -->
                <div class="contenedorIa">
                    <img class="sprites" id="spriteIa" 
                    src="{% if num_sini_lokete > 950 %}{{pokemonContrincante.sprites.front_shiny}}{%else%}{{pokemonContrincante.sprites.front_default}}{% endif %}"
                        alt="Foto de {{pokemonContrincante.name}}">
                    <div class="informacion">
                        {{pokemonContrincante.stat}}
                        {% for tipo in pokemonContrincante.types %}
                        <img src="{{ url_for('static', filename='img/Types_name/' + tipo + '.png') }}" alt="{{ tipo }}">
                        {% endfor %}
                    </div>
                </div>

            </div>
            <!-- Fin-Enemigo -->
            <!-- Jugador -->
            <div id="bloqueJugador">

                <!-- INICIO ESTADO -->
                <div>
                    <div class="bloqueEstado">
                        <div class="top-row">
                            <div class="name">{{ pokemonJugadorUnico.name | capitalize }}</div>
                        </div>

                        <div class="bloque_hpBarra">
                            <div class="hpBarra" style="width: {{(batalla.hp_Jugador/hp_max_jugador)*100}}%;"></div>
                        </div>
                        <div class="hpText">
                            {{batalla.hp_Jugador }} / {{ hp_max_jugador }}
                        </div>
                    </div>
                </div><br>
                <!-- FIN ESTADO -->
                <div class="contenedorJugador">
                    <img  class="sprites {% if pokemonContrincante.name in orden_ataques %}attack{% endif %}" id="spriteJugador" 
                    src="{% if num_sini_lokete < 50 %}{{pokemonJugadorUnico.sprites.back_shiny}}{%else%}{{pokemonJugadorUnico.sprites.back_default}}{% endif %}"
                        alt="Foto de {{pokemonJugadorUnico.name}}">
                    <div class="informacion">
                        {{pokemonJugadorUnico.stat}}
                        {% for tipo in pokemonJugadorUnico.types %}
                        <img src="{{ url_for('static', filename='img/Types_name/' + tipo + '.png') }}" alt="{{ tipo }}">
                        {% endfor %}
                    </div>
                </div>
            </div>
            <!-- Fin-Jugador -->
        </div><br>
        <!-- Fin-Batalla-Interfaz -->

            {% if batalla.hp_rival == 0 or batalla.hp_Jugador == 0 %}
                    <div class="mensaje_resultado">
                        <h1>Has {{resultado}}</h1>
                        <div class="botones">
                            <button class="menu-btn" onclick="window.location.href='/pokedexSeleccion'">
                                Jugar de nuevo
                            </button>

                            <button class="menu-btn" onclick="window.location.href='/logout'">
                                Cerrar Sesi√≥n
                            </button>
                        </div>
                    </div>
            {% else %}
                <form method="POST">
                    <div class="movimientos">
                            {% for movimiento in movimientos %}
                            <button type="submit" name="movimiento" value="{{ movimiento.name }}"  class="moves" style="{{ colorM.get(movimiento.type) }};">
                                {{ movimiento.name }} &nbsp;&nbsp;
                                PC: {{ movimiento.accuracy }}%
                                PW: {{ movimiento.power }}
                                <img src="{{ url_for('static', filename='img/Types_name/' + movimiento.type + '.png') }}"
                                    alt="{{ movimiento.type }}">
                            </button>
                        {% endfor %}
                    </div>
                </form>
            {% endif %}

    </div>
    <div class="movimientos">
        <h2>Log</h2>

        {% for turno in log %}
            <div class="turno">
                {% for linea in turno %}
                    <p>{{ linea }}</p>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
</div>

{% endblock %}